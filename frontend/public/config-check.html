<!DOCTYPE html>
<html>
<head>
    <title>Backend URL Check</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #00ff00;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #00ff00;
        }
        .error { color: #ff0000; }
        .success { color: #00ff00; }
    </style>
</head>
<body>
    <h1>üîß Backend Configuration Check</h1>

    <div class="status">
        <h2>Current Configuration:</h2>
        <div id="config"></div>
    </div>

    <div class="status">
        <h2>Expected:</h2>
        <div class="success">https://backend-production-630c.up.railway.app</div>
    </div>

    <script>
        // This will be replaced by webpack at build time
        const backendUrl = '%REACT_APP_BACKEND_URL%';
        const processEnv = typeof process !== 'undefined' && process.env ? process.env.REACT_APP_BACKEND_URL : 'NOT_AVAILABLE';

        const configDiv = document.getElementById('config');

        configDiv.innerHTML = `
            <div>Build-time value: <span class="${backendUrl.includes('https') ? 'success' : 'error'}">${backendUrl}</span></div>
            <div>Process.env value: <span>${processEnv}</span></div>
            <div>Current protocol: <span class="${window.location.protocol === 'https:' ? 'success' : 'error'}">${window.location.protocol}</span></div>
            <div>Current host: ${window.location.host}</div>
        `;

        // Test actual API endpoint
        fetch('https://backend-production-630c.up.railway.app/api/health')
            .then(res => res.json())
            .then(data => {
                configDiv.innerHTML += `<div class="success">‚úÖ Backend HTTPS works: ${JSON.stringify(data)}</div>`;
            })
            .catch(err => {
                configDiv.innerHTML += `<div class="error">‚ùå Backend HTTPS failed: ${err.message}</div>`;
            });

        // Test HTTP (should fail with Mixed Content)
        fetch('http://backend-production-630c.up.railway.app/api/health')
            .then(res => res.json())
            .then(data => {
                configDiv.innerHTML += `<div class="error">‚ö†Ô∏è Backend HTTP worked (should have been blocked!)</div>`;
            })
            .catch(err => {
                configDiv.innerHTML += `<div class="success">‚úÖ Backend HTTP blocked correctly (Mixed Content): ${err.message}</div>`;
            });
    </script>
</body>
</html>
