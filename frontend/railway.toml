[build]
builder = "DOCKERFILE"
dockerfilePath = "frontend/Dockerfile"
watchPatterns = ["frontend/**"]

[deploy]
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Environment variables for build
[[deploy.environmentVariables]]
name = "REACT_APP_BACKEND_URL"
value = "/api"

[[deploy.environmentVariables]]
name = "NODE_ENV"
value = "production"

[[deploy.environmentVariables]]
name = "GENERATE_SOURCEMAP"
value = "false"

# Dependencies - specify dependency on backend service
[dependencies]
services = ["backend"]

# Resource allocation
[resources]
memory = "512Mi"
cpu = "250m"

# Networking
[networking]
internalPort = 3000
serviceName = "frontend"

# Public domain configuration
[public]
customDomains = []
enableCDN = true
staticAssets = true
