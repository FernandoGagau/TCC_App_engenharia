{
  "agent_metadata": {
    "name": "Agente de Obras Conversacional",
    "version": "1.0.0",
    "description": "Agente especializado em documenta√ß√£o e monitoramento de obras atrav√©s de chat e an√°lise de imagens",
    "created_at": "2025-01-15",
    "author": "Agente Engenharia Team"
  },

  "model_config": {
    "provider": "openai",
    "chat_model": "gpt-4-turbo-preview",
    "vision_model": "gpt-4-vision-preview",
    "temperature": 0.3,
    "max_tokens": 2048,
    "vision_enabled": true,
    "max_image_size": "20MB",
    "supported_formats": ["jpg", "jpeg", "png", "webp"]
  },

  "locations": {
    "location_1": {
      "id": "area_externa",
      "name": "√Årea Externa - Fachada",
      "description": "Fachada principal, √°rea externa e estruturas externas da constru√ß√£o",
      "icon": "üèóÔ∏è",
      "key_elements": [
        "estrutura",
        "funda√ß√£o",
        "revestimento_externo",
        "esquadrias",
        "cobertura",
        "√°rea_de_trabalho"
      ],
      "tracking_phases": ["fundacao", "estrutura", "alvenaria", "revestimento", "acabamento"],
      "typical_activities": [
        "escava√ß√£o",
        "concretagem de funda√ß√£o",
        "levantamento de pilares",
        "constru√ß√£o de paredes",
        "aplica√ß√£o de revestimento externo"
      ]
    },
    "location_2": {
      "id": "area_interna",
      "name": "√Årea Interna - Ambiente Principal",
      "description": "Ambiente interno principal da obra (sala, quarto, ambiente integrado)",
      "icon": "üè†",
      "key_elements": [
        "piso",
        "paredes_internas",
        "teto",
        "instala√ß√µes_aparentes",
        "divis√≥rias",
        "v√£os_de_porta"
      ],
      "tracking_phases": ["estrutura", "alvenaria", "instalacoes", "revestimento", "acabamento"],
      "typical_activities": [
        "levantamento de paredes internas",
        "instala√ß√µes el√©tricas",
        "instala√ß√µes hidr√°ulicas",
        "reboco e massa corrida",
        "pintura e acabamentos"
      ]
    },
    "location_3": {
      "id": "area_tecnica",
      "name": "√Årea T√©cnica - Cozinha/Banheiro",
      "description": "√Åreas molhadas, instala√ß√µes t√©cnicas e utilidades",
      "icon": "üîß",
      "key_elements": [
        "tubula√ß√£o_hidraulica",
        "tubula√ß√£o_eletrica",
        "impermeabiliza√ß√£o",
        "revestimentos_ceramicos",
        "lou√ßas_e_metais",
        "pontos_de_agua"
      ],
      "tracking_phases": ["instalacoes", "impermeabilizacao", "revestimento", "lou√ßas", "acabamento"],
      "typical_activities": [
        "instala√ß√£o de tubula√ß√µes",
        "impermeabiliza√ß√£o de √°reas molhadas",
        "aplica√ß√£o de revestimentos cer√¢micos",
        "instala√ß√£o de lou√ßas sanit√°rias",
        "instala√ß√£o de metais e acess√≥rios"
      ]
    }
  },

  "construction_phases": {
    "fundacao": {
      "name": "Funda√ß√£o",
      "description": "Escava√ß√£o, ferragem e concretagem da funda√ß√£o",
      "icon": "‚õèÔ∏è",
      "typical_duration_days": 7,
      "visual_indicators": [
        "terra escavada",
        "ferragem de funda√ß√£o exposta",
        "formas de funda√ß√£o",
        "concreto fresco ou curado",
        "marca√ß√£o de obra"
      ],
      "completion_criteria": "Funda√ß√£o concretada, curada e pronta para pr√≥xima etapa",
      "quality_checkpoints": [
        "profundidade da escava√ß√£o conforme projeto",
        "posicionamento correto da ferragem",
        "qualidade do concreto aplicado",
        "tempo de cura respeitado"
      ]
    },
    "estrutura": {
      "name": "Estrutura",
      "description": "Pilares, vigas e lajes estruturais",
      "icon": "üèóÔ∏è",
      "typical_duration_days": 14,
      "visual_indicators": [
        "pilares de concreto",
        "vigas estruturais",
        "lajes concretadas",
        "ferragem estrutural",
        "formas de madeira ou met√°licas"
      ],
      "completion_criteria": "Estrutura completa, desformada e com resist√™ncia adequada",
      "quality_checkpoints": [
        "dimens√µes dos elementos estruturais",
        "prumo e alinhamento de pilares",
        "resist√™ncia do concreto",
        "desforma no tempo correto"
      ]
    },
    "alvenaria": {
      "name": "Alvenaria",
      "description": "Paredes de veda√ß√£o e divis√≥rias internas",
      "icon": "üß±",
      "typical_duration_days": 10,
      "visual_indicators": [
        "tijolos ou blocos cer√¢micos",
        "argamassa de assentamento",
        "paredes em constru√ß√£o",
        "v√£os de portas e janelas",
        "vergas e contravergas"
      ],
      "completion_criteria": "Todas as paredes levantadas conforme projeto",
      "quality_checkpoints": [
        "prumo e alinhamento das paredes",
        "amarra√ß√£o adequada entre paredes",
        "dimens√µes dos v√£os corretas",
        "execu√ß√£o de vergas e contravergas"
      ]
    },
    "instalacoes": {
      "name": "Instala√ß√µes",
      "description": "Instala√ß√µes el√©tricas, hidr√°ulicas e complementares",
      "icon": "‚ö°",
      "typical_duration_days": 12,
      "visual_indicators": [
        "tubula√ß√µes el√©tricas",
        "tubula√ß√µes hidr√°ulicas",
        "caixas de passagem",
        "pontos el√©tricos",
        "registros e v√°lvulas"
      ],
      "completion_criteria": "Instala√ß√µes executadas e testadas funcionalmente",
      "quality_checkpoints": [
        "tubula√ß√µes sem vazamentos",
        "instala√ß√µes el√©tricas energizadas",
        "pontos conforme projeto",
        "testes de funcionamento aprovados"
      ]
    },
    "revestimento": {
      "name": "Revestimento",
      "description": "Revestimentos de paredes, pisos e tetos",
      "icon": "üé®",
      "typical_duration_days": 15,
      "visual_indicators": [
        "reboco nas paredes",
        "massa corrida aplicada",
        "cer√¢mica ou revestimento aplicado",
        "rejuntamento",
        "acabamento de cantos"
      ],
      "completion_criteria": "Revestimentos aplicados e acabados",
      "quality_checkpoints": [
        "ader√™ncia do revestimento",
        "planeza e uniformidade",
        "qualidade do rejuntamento",
        "acabamento de detalhes"
      ]
    },
    "acabamento": {
      "name": "Acabamento",
      "description": "Pintura, lou√ßas, metais e acabamentos finais",
      "icon": "‚ú®",
      "typical_duration_days": 8,
      "visual_indicators": [
        "pintura aplicada",
        "lou√ßas instaladas",
        "metais e acess√≥rios",
        "pisos finalizados",
        "limpeza final"
      ],
      "completion_criteria": "Todos os acabamentos finais conclu√≠dos e obra limpa",
      "quality_checkpoints": [
        "qualidade da pintura",
        "funcionamento de lou√ßas e metais",
        "limpeza e organiza√ß√£o",
        "detalhes de acabamento"
      ]
    }
  },

  "prompts": {
    "system_prompt": "Voc√™ √© um especialista em obras e constru√ß√£o civil com mais de 15 anos de experi√™ncia. Sua fun√ß√£o √© documentar obras atrav√©s de conversas estruturadas e an√°lise de imagens.\n\nCOMPORTAMENTO:\n- Seja amig√°vel, t√©cnico mas acess√≠vel\n- Mantenha o contexto da conversa\n- Fa√ßa perguntas claras e objetivas\n- Analise imagens com precis√£o t√©cnica\n- Gere documenta√ß√£o estruturada em JSON\n- Use emojis para tornar a conversa mais engajadora\n- Sempre confirme informa√ß√µes importantes\n\nFOCO:\n- Documente 3 locais espec√≠ficos da obra\n- Identifique fases construtivas corretamente\n- Estime progresso com base em evid√™ncias visuais\n- Mantenha hist√≥rico de todas as mudan√ßas\n- Forne√ßa recomenda√ß√µes t√©cnicas quando apropriado",

    "initial_interview": {
      "intro_message": "üëã Ol√°! Sou seu **Agente de Documenta√ß√£o de Obras**!\n\nVou te ajudar a documentar e acompanhar o progresso da sua obra de forma autom√°tica e inteligente.\n\nüéØ **O que vou fazer:**\n- Fazer algumas perguntas sobre a obra\n- Analisar fotos dos 3 locais principais\n- Criar documenta√ß√£o autom√°tica em JSON\n- Acompanhar o progresso ao longo do tempo\n\nVamos come√ßar? üöÄ",

      "questions_sequence": [
        {
          "id": "project_name",
          "question": "üìã **Qual √© o nome ou identifica√ß√£o desta obra?**\n\nExemplo: 'Casa Jo√£o Silva', 'Reforma Apartamento 301', 'Amplia√ß√£o Cozinha'",
          "type": "text",
          "required": true,
          "validation": "min_length:3"
        },
        {
          "id": "project_type",
          "question": "üèóÔ∏è **Que tipo de constru√ß√£o estamos acompanhando?**\n\nOp√ß√µes: Constru√ß√£o nova, Reforma, Amplia√ß√£o, Retrofit, Outros",
          "type": "select",
          "options": ["constru√ß√£o_nova", "reforma", "amplia√ß√£o", "retrofit", "outros"],
          "required": true
        },
        {
          "id": "project_address",
          "question": "üìç **Qual √© o endere√ßo ou localiza√ß√£o da obra?**\n\nPode ser o endere√ßo completo ou uma refer√™ncia (Rua, Cidade)",
          "type": "text",
          "required": true,
          "validation": "min_length:5"
        },
        {
          "id": "responsible_engineer",
          "question": "üë∑ **Quem √© o respons√°vel t√©cnico pela obra?**\n\nNome e CREA/CAU se souber. Ex: 'Eng. Jo√£o Santos - CREA 123456'",
          "type": "text",
          "required": true,
          "validation": "min_length:3"
        },
        {
          "id": "start_date",
          "question": "üìÖ **Qual a data de in√≠cio da obra?**\n\nSe j√° come√ßou, a data real. Se ainda n√£o, a data prevista.\nFormato: DD/MM/AAAA",
          "type": "date",
          "required": true,
          "format": "DD/MM/YYYY"
        },
        {
          "id": "expected_completion",
          "question": "üéØ **Qual a previs√£o de conclus√£o da obra?**\n\nData prevista para t√©rmino completo.\nFormato: DD/MM/AAAA",
          "type": "date",
          "required": true,
          "format": "DD/MM/YYYY"
        },
        {
          "id": "photo_location_1",
          "question": "üì∏ **FOTO 1/3 - √ÅREA EXTERNA/FACHADA**\n\nüèóÔ∏è Preciso de uma foto da **√°rea externa** da obra:\n- Fachada principal\n- √Årea de trabalho externa\n- Estrutura externa vis√≠vel\n\nEnvie a foto quando estiver pronto!",
          "type": "image",
          "location": "location_1",
          "required": true
        },
        {
          "id": "photo_location_2",
          "question": "üì∏ **FOTO 2/3 - √ÅREA INTERNA PRINCIPAL**\n\nüè† Agora preciso de uma foto da **√°rea interna principal**:\n- Sala, quarto ou ambiente principal\n- Vista geral do interior\n- Estado atual da constru√ß√£o interna\n\nEnvie a foto quando estiver pronto!",
          "type": "image",
          "location": "location_2",
          "required": true
        },
        {
          "id": "photo_location_3",
          "question": "üì∏ **FOTO 3/3 - √ÅREA T√âCNICA**\n\nüîß Por √∫ltimo, uma foto da **√°rea t√©cnica**:\n- Cozinha, banheiro ou √°rea molhada\n- Local das instala√ß√µes principais\n- √Årea de utilidades\n\nEnvie a foto quando estiver pronto!",
          "type": "image",
          "location": "location_3",
          "required": true
        }
      ],

      "completion_message": "‚úÖ **Documenta√ß√£o inicial conclu√≠da!**\n\nüìã Analisei todas as informa√ß√µes e fotos. Sua obra foi documentada com sucesso!\n\nüìä **Vou mostrar agora:**\n- Resumo da obra\n- Status dos 3 locais\n- Progresso atual estimado\n- Pr√≥ximas etapas recomendadas\n\nüíæ Documenta√ß√£o salva automaticamente em JSON!"
    },

    "image_analysis": {
      "system_prompt": "Analise esta imagem de constru√ß√£o civil com expertise t√©cnica. Identifique precisamente:\n\n1. **Localiza√ß√£o**: Qual dos 3 locais configurados (externa, interna, t√©cnica)\n2. **Fase Construtiva**: Qual fase atual (funda√ß√£o, estrutura, alvenaria, instala√ß√µes, revestimento, acabamento)\n3. **Progresso**: Estimativa percentual (0-100%) baseada em evid√™ncias visuais\n4. **Elementos Detectados**: Lista espec√≠fica do que est√° vis√≠vel\n5. **Qualidade**: Observa√ß√µes sobre execu√ß√£o e qualidade\n6. **Pr√≥ximos Passos**: O que deve ser feito em seguida\n\nSeja preciso, t√©cnico e baseie-se apenas no que est√° vis√≠vel na imagem.",

      "analysis_prompt": "Analise esta imagem de obra e forne√ßa uma an√°lise t√©cnica estruturada. \n\nCONSIDERE:\n- Elementos construtivos vis√≠veis\n- Estado de execu√ß√£o atual\n- Qualidade aparente dos trabalhos\n- Fase construtiva identific√°vel\n- Progresso estimado da atividade\n\nRESPONDA NO FORMATO JSON com os campos: location_identified, current_phase, progress_percentage, elements_detected, quality_observations, next_steps, confidence_score, technical_notes.",

      "followup_questions": [
        "Precisa de mais detalhes sobre algum aspecto t√©cnico espec√≠fico?",
        "Quer que eu analise algum elemento em particular?",
        "Tem alguma d√∫vida sobre as recomenda√ß√µes que fiz?",
        "Quer comparar com fotos anteriores desta √°rea?"
      ]
    },

    "progress_update": {
      "system_prompt": "Compare o estado atual da obra com os dados anteriores e identifique mudan√ßas significativas no progresso. \n\nAN√ÅLISE:\n- Mudan√ßas vis√≠veis desde a √∫ltima foto\n- Evolu√ß√£o percentual do progresso\n- Nova fase se houver transi√ß√£o\n- Impacto no cronograma previsto\n- Qualidade da execu√ß√£o\n\nRECOMENDA√á√ïES:\n- Pr√≥ximas atividades priorit√°rias\n- Pontos de aten√ß√£o identificados\n- Sugest√µes de melhoria se aplic√°vel",

      "update_prompt": "Identifique as mudan√ßas no progresso desta √°rea da obra comparando com o estado anterior registrado.\n\nFOCO EM:\n- O que mudou desde a √∫ltima an√°lise\n- Progresso quantific√°vel (percentual)\n- Novas fases ou atividades iniciadas\n- Qualidade da execu√ß√£o observada\n- Impacto no cronograma\n\nRESPONDA NO FORMATO JSON com os campos: changes_detected, progress_delta, new_phase_detected, timeline_impact, quality_assessment, recommendations.",

      "no_changes_message": "üîç **An√°lise conclu√≠da**\n\nN√£o identifiquei mudan√ßas significativas nesta √°rea desde a √∫ltima foto.\n\nüìä **Status mantido:**\n- Mesma fase construtiva\n- Progresso similar\n- Aguardando pr√≥ximas atividades\n\nüí° **Recomenda√ß√£o**: Continue enviando fotos conforme o trabalho avan√ßa!",

      "progress_messages": {
        "significant_progress": "üöÄ **Excelente progresso detectado!**",
        "moderate_progress": "üìà **Bom avan√ßo identificado!**",
        "minimal_progress": "‚è≥ **Pequeno avan√ßo detectado**",
        "phase_transition": "üéØ **Nova fase iniciada!**",
        "quality_concern": "‚ö†Ô∏è **Ponto de aten√ß√£o identificado**"
      }
    },

    "error_handling": {
      "image_analysis_failed": "‚ùå **N√£o consegui analisar esta imagem**\n\nPoss√≠veis causas:\n- Imagem muito escura ou borrada\n- √Çngulo n√£o permite identificar elementos construtivos\n- Formato n√£o suportado\n\nüí° **Sugest√£o**: Tire uma nova foto com boa ilumina√ß√£o e foque nos elementos da constru√ß√£o.",

      "location_not_identified": "ü§î **N√£o consegui identificar qual local esta imagem representa**\n\nPor favor, me informe:\n- √â a √°rea externa/fachada? (Local 1)\n- √â a √°rea interna principal? (Local 2)  \n- √â a √°rea t√©cnica/cozinha/banheiro? (Local 3)\n\nIsso me ajudar√° a documentar corretamente!",

      "general_error": "‚ùå **Ops! Algo deu errado**\n\nTente novamente ou me informe se o problema persistir.\nEstou aqui para ajudar! ü§ñ"
    },

    "helpful_tips": {
      "photo_quality": "üì∏ **Dicas para fotos melhores:**\n- Use boa ilumina√ß√£o natural\n- Mantenha a c√¢mera est√°vel\n- Capture uma vis√£o geral da √°rea\n- Evite contra-luz\n- Foque nos elementos construtivos",

      "documentation_benefits": "üìã **Benef√≠cios da documenta√ß√£o:**\n- Hist√≥rico completo da obra\n- Identifica√ß√£o de problemas precocemente\n- Controle de qualidade automatizado\n- Relat√≥rios para stakeholders\n- Base para decis√µes t√©cnicas",

      "usage_suggestions": "üí° **Como usar melhor:**\n- Envie fotos regularmente (semanal)\n- Documente marcos importantes\n- Tire fotos antes/depois de atividades\n- Use em reuni√µes de obra\n- Compartilhe com a equipe"
    }
  },

  "response_templates": {
    "analysis_summary": {
      "template": "üîç **AN√ÅLISE CONCLU√çDA - {location_name}**\n\nüìä **Situa√ß√£o Atual:**\n- **Fase**: {current_phase} ({progress}% conclu√≠do)\n- **Elementos**: {elements_list}\n- **Qualidade**: {quality_assessment}\n\nüéØ **Pr√≥ximas Etapas:**\n{next_steps}\n\nüìà **Progresso Geral da Obra**: {overall_progress}%",

      "fields": {
        "location_name": "Nome do local analisado",
        "current_phase": "Fase construtiva atual",
        "progress": "Percentual de progresso",
        "elements_list": "Lista de elementos detectados",
        "quality_assessment": "Avalia√ß√£o da qualidade",
        "next_steps": "Recomenda√ß√µes para pr√≥ximas etapas",
        "overall_progress": "Progresso geral calculado"
      }
    },

    "project_summary": {
      "template": "üìã **RESUMO DA OBRA**\n\n**üèóÔ∏è {project_name}**\n- **Tipo**: {project_type}\n- **Local**: {project_address}\n- **Respons√°vel**: {responsible_engineer}\n- **Per√≠odo**: {start_date} ‚Üí {expected_completion}\n\n**üìç STATUS DOS LOCAIS:**\n1. **{location_1_name}**: {location_1_phase} - {location_1_progress}%\n2. **{location_2_name}**: {location_2_phase} - {location_2_progress}%\n3. **{location_3_name}**: {location_3_phase} - {location_3_progress}%\n\n**üìä Progresso Geral**: {overall_progress}%\n**üéØ Pr√≥xima Etapa**: {next_milestone}\n\n‚úÖ **Documenta√ß√£o salva**: `{filename}`"
    }
  },

  "json_output_schema": {
    "project_info": {
      "project_name": "string",
      "project_type": "string",
      "project_address": "string",
      "responsible_engineer": "string",
      "start_date": "string (DD/MM/YYYY)",
      "expected_completion": "string (DD/MM/YYYY)",
      "created_at": "string (ISO datetime)",
      "last_updated": "string (ISO datetime)",
      "total_estimated_days": "number",
      "project_id": "string (UUID)"
    },

    "locations_status": {
      "location_1": {
        "location_id": "string",
        "location_name": "string",
        "current_phase": "string",
        "progress_percentage": "number (0-100)",
        "last_photo_date": "string (ISO datetime)",
        "last_photo_path": "string",
        "elements_detected": ["array of strings"],
        "quality_score": "number (0-100)",
        "observations": "string",
        "next_milestone": "string",
        "estimated_completion_date": "string (DD/MM/YYYY)"
      },
      "location_2": "{ same structure as location_1 }",
      "location_3": "{ same structure as location_1 }"
    },

    "timeline": [
      {
        "timestamp": "string (ISO datetime)",
        "location": "string",
        "event_type": "string (photo_analysis | progress_update | phase_change)",
        "phase": "string",
        "progress_before": "number",
        "progress_after": "number",
        "description": "string",
        "photo_path": "string",
        "confidence_score": "number (0-100)"
      }
    ],

    "overall_progress": {
      "total_progress_percentage": "number (0-100)",
      "current_main_phase": "string",
      "phases_completed": ["array of strings"],
      "estimated_completion_date": "string (DD/MM/YYYY)",
      "days_elapsed": "number",
      "days_remaining": "number",
      "schedule_status": "string (on_track | ahead | delayed)",
      "delays_identified": ["array of strings"],
      "recommendations": ["array of strings"]
    },

    "quality_metrics": {
      "overall_quality_score": "number (0-100)",
      "location_1_quality": "number (0-100)",
      "location_2_quality": "number (0-100)",
      "location_3_quality": "number (0-100)",
      "quality_issues": ["array of strings"],
      "quality_improvements": ["array of strings"]
    },

    "metadata": {
      "schema_version": "1.0.0",
      "agent_version": "1.0.0",
      "total_photos_analyzed": "number",
      "total_updates": "number",
      "last_agent_interaction": "string (ISO datetime)"
    }
  },

  "validation_rules": {
    "progress_percentage": {
      "min": 0,
      "max": 100,
      "type": "integer"
    },
    "quality_score": {
      "min": 0,
      "max": 100,
      "type": "integer"
    },
    "confidence_score": {
      "min": 0,
      "max": 100,
      "type": "integer"
    },
    "dates": {
      "format": "DD/MM/YYYY",
      "validation": "valid_date"
    },
    "required_fields": [
      "project_name",
      "project_type",
      "project_address",
      "responsible_engineer",
      "start_date",
      "expected_completion"
    ]
  },

  "feature_flags": {
    "enable_auto_progress_calculation": true,
    "enable_quality_scoring": true,
    "enable_timeline_tracking": true,
    "enable_recommendations": true,
    "enable_phase_prediction": false,
    "enable_cost_estimation": false,
    "enable_weather_integration": false
  }
}